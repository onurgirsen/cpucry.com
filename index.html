<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polymarket Dashboard | Black-Scholes Analytics</title>
    <meta name="description"
        content="Real-time Polymarket analysis with Black-Scholes pricing model for stock prediction markets">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìä</text></svg>">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <span class="logo-icon">üìä</span>
                <h1>Poly<span class="highlight">Market</span> Dashboard</h1>
            </div>
            <div class="header-info">
                <span class="badge">BLACK-SCHOLES</span>
                <span class="last-updated" id="lastUpdated">Loading...</span>
                <button class="refresh-btn" id="refreshBtn" onclick="manualRefresh()" title="Refresh Data">
                    <span class="refresh-icon">üîÑ</span>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <button class="home-btn" onclick="showTopOpportunities()">
                        üèÜ Top Opportunities
                    </button>
                </div>
                <h2>Companies</h2>
                <div class="company-list" id="companyList">
                    <!-- Filled dynamically -->
                </div>
            </aside>

            <!-- Content Area -->
            <div class="content">
                <div class="company-header">
                    <h2 id="companyTitle">üèÜ Top Opportunities</h2>
                    <p id="companySubtitle">Best probability-adjusted returns (ROI) across all markets</p>
                </div>

                <!-- Stats Grid - Hidden on homepage -->
                <div class="stats-grid" id="statsGrid" style="display: none;">
                    <div class="stat-card">
                        <span class="stat-label">Current Price</span>
                        <span class="stat-value" id="currentPrice">-</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">Volatility</span>
                        <span class="stat-value" id="volatility">-</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">Risk-Free Rate</span>
                        <span class="stat-value" id="riskFreeRate">-</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">Days to Expiry</span>
                        <span class="stat-value" id="daysToExpiry">-</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">Markets</span>
                        <span class="stat-value" id="totalMarkets">-</span>
                    </div>
                </div>

                <!-- Markets Table -->
                <div class="table-container" id="tableContainer">
                    <table class="markets-table" id="marketsTable">
                        <thead>
                            <tr>
                                <th>Company</th>
                                <th>Strike</th>
                                <th class="bs-fair-value-header">BS Prob (NO)</th>
                                <th colspan="2" class="col-group-header col-ask-header">Buy YES</th>
                                <th colspan="2" class="col-group-header col-bid-header">Buy NO</th>
                                <th>Market YES</th>
                                <th>ROI (1$)</th>
                                <th>Kelly %</th>
                            </tr>
                        </thead>
                        <tbody id="marketsTableBody">
                            <!-- Filled dynamically -->
                        </tbody>
                    </table>
                </div>

                <!-- Loading State -->
                <div class="loading-state" id="loadingState" style="display: none;">
                    <div class="spinner"></div>
                    <p>Fetching market data...</p>
                </div>

                <!-- Empty State -->
                <div class="empty-state" id="emptyState" style="display: none;">
                    <div class="empty-icon">üìà</div>
                    <h3>Select a Company</h3>
                    <p>Choose a company from the sidebar to view its prediction markets and analytics.</p>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Data from <a href="https://polymarket.com" target="_blank">Polymarket</a> | Black-Scholes Model |
                <span id="refreshStatus">Auto-refresh: 30s</span>
            </p>
        </footer>
    </div>

    <script src="config.js"></script>
    <script src="blackscholes.js"></script>
    <script src="api.js"></script>
    <script src="app.js"></script>
</body>

</html>